<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room Classifier</title>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd"></script>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
</head>
<body>
    <div class="container">
        <h1>Room Classifier</h1>

        <div class="instructions" id="instructions">
            <div class="step-box">
                <h3>Step 1</h3>
                <p>Wait for the model to load.</p>
            </div>
            <div class="step-box">
                <h3>Step 2</h3>
                <p>Upload a room image.</p>
            </div>
            <div class="step-box">
                <h3>Step 3</h3>
                <p>Review and download your results!</p>
            </div>
        </div>

        <div id="uploadSection">
            <div class="file-input-wrapper">
                <button class="btn">Upload Image</button>
                <input type="file" id="imageUpload" accept="image/*">
            </div>
            <div id="modelLoading">Loading model, please wait...</div>
        </div>

        <div id="resultSection" class="hidden">
            <img id="uploadedImage" src="" alt="Uploaded Image">
            <div class="result-details">
                <h2>Analysis Results</h2>
                <table id="resultTable">
                    <tr>
                        <th>Room Type</th>
                        <th>Similarity Score</th>
                    </tr>
                </table>
                <p>
                    <img id="plotImage" src="" alt="3D PCA Plot">
                </p>
                <button class="download-btn" onclick="downloadResults()">Download Results</button>
                <button class="download-btn" onclick="downloadPlot()">Download Plot</button>
                <button class="download-btn" onclick="returnToMain()">Back to Main</button>
            </div>
        </div>

        <a href="https://github.com/kevalsil/room-classifier" class="github-icon" target="_blank">
            <img src="https://img.icons8.com/?size=100&id=106562&format=png&color=000000" alt="GitHub" width="32" height="32">
        </a>       
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>